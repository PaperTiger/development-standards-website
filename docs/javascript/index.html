<link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
<link href="/development-standards-website/style.css" rel="stylesheet">
<h1>Paper Tiger Development Standards</h1>
<div class="nav">
  <li>
    <a href="/development-standards-website/getting-started/index.html">Getting Started</a>
  </li>
  <li><a href="/development-standards-website/git-standards/index.html">GIT & Github</a></li>
  <li><a href="/development-standards-website/javascript/index.html">Javascript</a></li>
  <li><a href="/development-standards-website/twig/index.html">Twig</a></li>
  <li><a href="/development-standards-website/css/index.html">CSS</a></li>
  <li><a href="/development-standards-website/craftcms/index.html">CraftCMS</a></li>
  <li><a href="/development-standards-website/build-process/index.html">Build Proccess</a></li>
  <li><a href="/development-standards-website/deployments/index.html">Deployments</a></li>
</div>
<h2>Javascript</h2>
<h3>JS Technologies:</h3>
<ul>
<li>ES6</li>
<li>Babel</li>
<li>Class Object definition</li>
</ul>
<p>Use <code>class</code> when possible. &quot;Classes are a template for creating objects. They encapsulate data with code to work on that data. Classes in JS are built on prototypes but also have some syntax and semantics that are not shared with ES5 class-like semantics.&quot; <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes">Moz Docs</a></p>
<h3>JS Folder Structure</h3>
<pre class="language-js"><code class="language-js">├── js<br>│   ├── _actions<br>│   ├── _helpers<br>│   ├── global<br>│   ├── modules<br>│   ├── app<span class="token punctuation">.</span>js</code></pre>
<h4>js/modules</h4>
<p>Modules are js components that are lazy-loaded depending on if needed on the page. To call a js module that a certain element needs in order to function, it is required to add the data attribute <code>data-js-module</code> and the class <code>js-module</code></p>
<h5>Use camel-case folders for modules</h5>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Bad</span><br><span class="token string">'src/js/modules/MyModule.js'</span><br><br><span class="token comment">// Good</span><br><span class="token string">'src/js/modules/MyModule/index.js'</span></code></pre>
<h5>Basic module file structure.</h5>
<pre class="language-js"><code class="language-js"><span class="token comment">// js/modules/MyModule/index.js</span><br><br><span class="token keyword">import</span> <span class="token punctuation">{</span> handleEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../_helpers"</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><br> <span class="token comment">/** constructor(el) Required **/</span><br> <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Setup inital Vars</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>el <span class="token operator">=</span> el<br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>childElement <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.other-element'</span><span class="token punctuation">)</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>globalElement <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.global-element'</span><span class="token punctuation">)</span><br><br>  <span class="token keyword">this</span><span class="token punctuation">.</span>genre <span class="token operator">=</span> el<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>jsGenre <span class="token comment">// Jazz</span><br> <span class="token punctuation">}</span><br> <br> <span class="token comment">/** init() Required **/</span><br> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">// Break up code for different functionality</span><br>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br> <span class="token punctuation">}</span><br> <br> <span class="token function">handleEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token function">handleEvent</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><br>   el<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>el<span class="token punctuation">,</span><br>   <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><br> <span class="token punctuation">}</span><br><br> <span class="token function">clickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">change something about </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>globalElement<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><br> <span class="token punctuation">}</span><br><br> <span class="token comment">/** destroy() Required **/</span><br> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">/* <br>   - Destroy any event handler or tickers<br>   - Generally you don't have to worry about destroying element. <br>     Only if you are ajaxing something or need to rebuild the module for some reason.<br>  */</span><br> <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h5>Let's attached <code>MyModule</code> to an element!</h5>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js-module<span class="token punctuation">"</span></span> <span class="token attr-name">data-js-module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MyModule<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<h5>Data Attributes</h5>
<p>When adding data attributes to HTML elements to pass data to <code>JS</code>, always define <code>data-js</code> so signify that it is used in JS and not CSS.</p>
<pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">[...]</span> <span class="token attr-name">data-js-genre</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Jazz<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre>
<h4>js/globals</h4>
<p>Globals are modules that are used on every page of the site. This could be to handle global functionality in the Footer, Header, etc. These classes should be imported directly into <code>js/app.js</code></p>
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> header <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./globals/Header'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">x<span class="token punctuation">.</span>default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>header<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>
<h4>js/_actions</h4>
<p>Actions are small helper functions that help when needing to import, fetch, or post data. For example, you could have a <code>fetchData</code> function, where you could pass a URL into <code>fetchData('/foo/bar')</code> which would handle the fetch request. These generally are imported directly into different modules/globals when needed.</p>
<h4>js/_helpers</h4>
<p>Helpers are functions that help with smaller tasks that are used through the site. I would suggest going through them and checkout what is available. Some commonly used functions are:</p>
<ul>
<li><code>js/_helpers/throttle</code> - Used to throttle resize, etc.</li>
<li><code>js/_helpers/handleEvent</code> - Used to handle click event instead of using <code>addEventListener</code>.</li>
<li><code>js/_helpers/getBounds</code> - Used to to get the <code>getBoundingClientRect</code> of an element.</li>
</ul>
<pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>throttle<span class="token punctuation">,</span> handleEvent<span class="token punctuation">,</span> getBounds<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../_helpers'</span></code></pre>
<h2>Arrow Functions</h2>
<p>Use Arrow Functions to define a function.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// Bad</span><br><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token comment">// Good</span><br><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre>
<h2>Dynamically import js packages</h2>
<p>When possible, try to lazyload js using dynamic imports if it's not needed on page load. For example, if a piece of functionality isn't needed until a button click or something becomes visible.</p>
<p>Code Example:</p>
<ol>
<li>Clicking the <code>this.DOM.button1</code> element will import <code>ModuleTwo</code>, if it has already been imported, then it skips the import and uses the already imported reference.</li>
<li>Click the <code>this.DOM.button2</code> element, call the destroy method of <code>ModuleTwo</code>; This will not destroy the instance of <code>this.moduleTwo</code>, you will need to do that manually if you need to unbind it from the parent class.</li>
</ol>
<p>Use the <strong>_action</strong> function (<code>_actions/getModule</code>) to import new modules.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>getModule<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../_actions'</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><br><br>  <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><br><br>  <span class="token comment">/**<br>   * Handle event listeners<br>  */</span><br>  <span class="token function">handleEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>button1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo <span class="token operator">:</span> <span class="token function">getModule</span><span class="token punctuation">(</span><span class="token string">'ModuleTwo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">x<span class="token punctuation">.</span>default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">DOM</span><span class="token punctuation">.</span>button2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>      <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo <span class="token operator">&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>moduleTwo<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
